<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al-Furqan Islamic Institute Incorporated</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.0/css/bootstrap.min.css}">
    <!-- Bootstrap JS -->
    <script th:src="@{/webjars/bootstrap/5.3.0/js/bootstrap.bundle.min.js}"></script>
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" th:href="@{/webjars/font-awesome/6.4.2/css/all.min.css}">
    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<script th:src="@{/js/script.js}"></script>
<script th:src="@{/js/sidebar.js}"></script>

<body>
    <!-- Sidebar -->
    <div th:replace="~{fragments/fragment :: sidebar}"></div>

    <!-- Topbar with Hamburger & User Icon -->
    <div class="dashboard-container" id="content">
        <div class="sticky-header">
            <!-- Topbar -->
            <div th:replace="~{fragments/fragment :: topbar}"></div>

            <div class="text-link" id="breadcrumb-container">
                <h4>Student Reports</h4>
                <a href="/home">Main</a>
                <p>/</p>
                <a href="/reports/student">Reports - Student Reports</a>
                <p>/</p>
                <a href="/reports/student/{studentName}" title="You're currently on this page.">Reynolds Perkins</a>
            </div>

            <div class="report-main-btns">
                <button type="button" class="btn-gray" data-open-modal="editStudentInformation">Edit</button>
                <button type="button" class="btn-neutral" data-open-modal="gradePrintModal">Print</button>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div id="confirmationModal" class="modal">
            <div class="modal-content scroll-lock">
                <p id="modalText">Are you sure?</p>
                <div class="modal-buttons">
                    <button id="confirmAction" class="btn-confirm">Confirm</button>
                    <button data-close-modal="confirmationModal" class="btn-cancel">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Modal for student information -->
        <div id="studentInformationContainer" class="student-information-container">
            <div class="student-information-container-content">
                <h1>Student Information</h1>
                <form method="" action="" id="studentInformationForm">
                    <div class="header">
                        <div class="half-unique">
                            <label for="student-id">Student ID: </label>
                            <input type="text" id="student-id">
                        </div> <br>

                        <div class="other-info-container">
                            <div class="half-other-info" id="stud-type-row">
                                <label for="stud-type">Student Type:</label>
                                <h6 id="stud-type">New</h6>
                            </div>

                            <div class="half-other-info" id="scholar-row">
                                <label for="type">Scholar:</label>
                                <h6>YES</h6>
                            </div>

                            <div class="half-other-info" id="transferee-row">
                                <label for="type">Transferee:</label>
                                <h6 id="transferee">YES</h6>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; align-content: center; justify-items: left;">
                        <h2>Personal Information</h2>
                    </div>

                    <div class="container">
                        <div class="row">
                            <div class="column1">
                                <div>
                                    <label for="name">Name</label>
                                    <div class="student-form-group half">
                                        <input type="text" id="firstName">
                                        <input type="text" id="middleName">
                                        <input type="text" id="lastName">
                                    </div>
                                    <div class="small-text">
                                        <p>First</p>
                                        <p>Middle</p>
                                        <p>Last</p>
                                    </div>
                                </div>
                            </div>
                            <div class="column2">
                                <!-- Gender, BDate, and Scholar -->
                                <div class="student-form-group half-stud-info-small" style="margin-bottom: 0px;">
                                    <label for="gender">Gender:</label>
                                    <input type="text" id="gender" style="width: 80px;">

                                    <label for="birthdate">Birthdate:</label>
                                    <input type="date" id="birthdate" readonly style="width: 120px;">
                                </div>
                            </div>

                            <div class="student-form-group">
                                <div>
                                    <label for="address">Address:</label>
                                    <div class="student-form-group half-unique">
                                        <input type="text" id="street" required placeholder="Street">
                                        <input type="text" id="barangay" required placeholder="Barangay">
                                        <input type="text" id="city" required placeholder="City">
                                    </div>
                                </div>

                                <div>
                                    <label>Place of Birth:</label>
                                    <div class="student-form-group">
                                        <input type="text" id="placeOfBirth" class="place-of-birth"
                                            style="width: 390px;">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; align-content: center; justify-items: left; margin-top: 20px;">
                        <h2>Additional Information</h2>
                    </div>

                    <div>
                        <h6>Father's Information</h6>
                        <div class="student-form-group">
                            <label for="fatherName">Name:</label>
                            <input type="text" id="studfatherName">

                            <label for="fatherOccupation">Occupation:</label>
                            <input type="text" id="studfatherOccupation">
                        </div> <br>
                    </div>
                    <div>
                        <h6>Mother's Information</h6>
                        <div class="student-form-group">
                            <label for="motherName">Name:</label>
                            <input type="text" id="studmotherName">

                            <label for="motherOccupation">Occupation:</label>
                            <input type="text" id="studmotherOccupation">
                        </div> <br>
                    </div>

                    <h6>Guardian's Information</h6>
                    <div class="student-form-group">
                        <label for="guardianName">Name:</label>
                        <input type="text" id="studguardianName">

                        <label for="guardianOccupation">Occupation:</label>
                        <input type="text" id="studguardianOccupation">
                    </div> <br>

                    <div class="student-form-group">
                        <label for="guardianContactNumber">Contact Number:</label>
                        <input type="text" id="guardianContactNumber" style="width: 385px;">

                        <label for="guardianAddress">Address:</label>
                        <input type="text" id="guardianAddress" style="width: 355px;">
                    </div> <br>

                    <div class="transferee-section">
                        <div style="display: flex; align-content: center; justify-items: left; margin-top: 20px;">
                            <h2>For Transferees Only</h2>
                        </div>

                        <!-- Transferee Requirements Section -->
                        <div class="transferee-requirements">
                            <h4>Requirements</h4>
                            <div id="transReqRecord" class="checkbox-transferee-reqs-group">
                                <!--naka check na daan ang mga filled-->
                            </div>

                            <!-- Update Button -->
                            <div style="margin-top: 15px;">
                                <button type="button" data-action="editGradeLevel"
                                    data-message="Are you sure you want to update this grade level?"
                                    id="updateRequirementsBtn" class="btn-confirm">Update</button>
                            </div>
                        </div>

                        <div class="student-form-group">
                            <label for="lastGradeLevelCompleted">Last Grade Level Completed:</label>
                            <input type="text" id="lastGradeLevelCompleted">

                            <label for="lastMadrasaYearCompleted">Last Madrasa Year Completed</label>
                            <input type="text" id="lastMadrasaYearCompleted">
                        </div> <br>

                        <div class="student-form-group">
                            <label for="madrasaNameLastAttended">Madrasa Name Last Attended:</label>
                            <input type="text" id="madrasaNameLastAttended">
                        </div> <br>

                        <div class="student-form-group">
                            <label for="madrasaAddress">Madrasa Address:</label>
                            <input type="text" id="madrasaAddress">
                        </div> <br>
                    </div>

                    <div style="display: flex; width: 100%; gap: 100px;">
                        <div class="header-stud-info-full">
                            <h2>Financial Information</h2>
                            <div class="action-non-scallable">
                                <div class="dropdown">
                                    <button type="button" class="dropdown-edit-btn">
                                        <img th:src="@{/images/icons/compose.png}" alt="edit-icon">
                                    </button>

                                    <div class="status-container">
                                        <button type="button" class="dropdown-print-btn"
                                            onclick="toggleDropdown(event)">
                                            Print
                                            <img src="/images/icons/printing-icon.png" alt="">
                                        </button>
                                    </div>

                                    <div class="dropdown-status-content">

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="header-stud-info-full">
                            <h2>Book Distribution</h2>
                            <div class="action-non-scallable">
                                <div class="dropdown">
                                    <button type="button" class="dropdown-edit-btn">
                                        <img th:src="@{/images/icons/compose.png}" alt="edit-icon">
                                    </button>
                                    <div class="status-container">
                                        <button type="button" class="dropdown-print-btn"
                                            onclick="toggleDropdown(event)">
                                            Print
                                            <img src="/images/icons/printing-icon.png" alt="">
                                        </button>
                                    </div>

                                    <div class="dropdown-status-content" id="dropdown-print-options">
                                        <a href="#">All</a>
                                        <a href="#">Semester 1</a>
                                        <a href="#">Semester 2</a>
                                        <a href="#">School Year 2023-2024</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="container-two">
                        <div class="column-main">
                            <p>Recent Transactions</p>
                            <div class="table-container">
                                <table class="mini-table" id="payment-table">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Book</td>
                                            <td><span>P</span>2,000</td>
                                            <td>
                                                <div class="status-container">
                                                    <div class="status" id="status-payments">Unpaid</div>
                                                </div>
                                            </td>
                                            <td>February 12, 2025</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin: 0px;">
                                <div style="display: flex; gap: 10px;">
                                    <h6>Balance:</h6>
                                    <h6>1, 000</h6>
                                </div>
                                <button id="transaction-record-btn">View Record</button>
                            </div>

                        </div>

                        <div class="column-main">
                            <p>Recent Distributions</p>
                            <div class="table-container">
                                <table class="mini-table" id="distribution-table">
                                    <thead>
                                        <tr>
                                            <th>Grade Level</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Grade 1</td>
                                            <td>February 12, 2025</td>
                                            <td>
                                                <div class="status-container">
                                                    <div class="status" id="status-distribution">Completed</div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div> <br>

                    <div>
                        <div class="header-stud-info-half">
                            <h2>Grades</h2>
                            <div class="action">
                                <div class="dropdown">
                                    <img th:src="@{/images/icons/compose.png}" alt="edit-icon">
                                    <div class="status-container">
                                        <button type="button" class="dropdown-print-btn"
                                            onclick="toggleDropdown(event)">
                                            Print
                                            <i class="fas fa-chevron-down"></i>
                                        </button>
                                    </div>

                                    <div class="dropdown-status-content" id="dropdown-print-options">
                                        <a href="#" class="action" data-open-modal="gradePrintModal">All</a>
                                        <a href="#" class="action" data-open-modal="gradePrintModal">Semester 1</a>
                                        <a href="#" class="action" data-open-modal="gradePrintModal">Semester 2</a>
                                        <a href="#" class="action" data-open-modal="gradePrintModal">School Year
                                            2023-2024</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="container-two">
                        <div class="column-main">
                            <div class="table-container">
                                <div style="display: flex; justify-content: space-between;">
                                    <div style="display: flex; gap: 8px;">
                                        <label>School Year:</label>
                                        <h6 id="sy">2025-2026</h6>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <label>Semester:</label>
                                        <h6 id="sem">1st Semester</h6>
                                    </div>
                                </div>
                                <table class="mini-table" id="grades-table">
                                    <thead>
                                        <tr>
                                            <th>Subject</th>
                                            <th>Grade</th>
                                            <th>Remarks</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr>
                                            <td>English</td>
                                            <td>78</td>
                                            <td>
                                                <div class="status-container">
                                                    <div class="status" id="grade-remarks">Pass</div>
                                                </div>
                                            </td>
                                        </tr>

                                        <tr id="average-row">
                                            <td>Average</td>
                                            <td>90</td>
                                            <td>
                                                <div class="status-container">
                                                    <div class="status" id="average-remarks">Pass</div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="column-main">
                            <div class="table-container">
                                <div style="display: flex; justify-content: space-between;">
                                    <div style="display: flex; gap: 8px;">
                                        <label>School Year:</label>
                                        <h6 id="sy">2025-2026</h6>
                                    </div>
                                    <div style="display: flex; gap: 8px;">
                                        <label>Semester:</label>
                                        <h6 id="sem">1st Semester</h6>
                                    </div>
                                </div>
                                <table class="mini-table" id="grades-table">
                                    <thead>
                                        <tr>
                                            <th>Subject</th>
                                            <th>Grade</th>
                                            <th>Remarks</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr>
                                            <td>English</td>
                                            <td>78</td>
                                            <td>
                                                <div class="status-container">
                                                    <div class="status" id="grade-remarks">Pass</div>
                                                </div>
                                            </td>
                                        </tr>

                                        <tr id="average-row">
                                            <td>Average</td>
                                            <td>90</td>
                                            <td>
                                                <div class="status-container">
                                                    <div class="status" id="average-remarks">Pass</div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
            </div>
            </form>
        </div>

        <!-- Grade Print Modal -->
        <div id="gradePrintModal" class="grade-print-dal modal">
            <div class="printable-area">
                <div class="grade-print-modal-content scroll-lock">
                    <!-- Close Button -->
                    <span class="close-modal" data-close-modal="gradePrintModal">&times;</span>

                    <!-- Report Header -->
                    <div class="header-container-print">

                        <div class="left-header">
                            <img src="/images/al-furqanlogo.jpg" alt="School Logo" class="school-logo-payment">
                        </div>
                        <div class="middle-header">
                            <div class="school-info-print">
                                <h3>AL-FURQAN ISLAMIC INSTITUTE INCORPORATED</h3>
                                <p>Talabaan, Zamboanga City</p>
                                <p>Phone #: 09358268263</p>
                                <h3 class="report-type"><strong>Grade Form</strong></h3>
                            </div>
                        </div>
                    </div>

                    <div class="separator-line"></div>
                    <!-- Student Info -->
                    <table border="1" cellspacing="0" cellpadding="6"
                        style="width: 100%; margin-top: -30px; font-family: Arial, sans-serif; border-collapse: collapse;">
                        <!-- Student Info Section -->
                        <tr class="stud-info-section">
                            <td colspan="6">
                                <div class="student-info-container-printable">
                                    <div class="payment-student-info-row">
                                        <label for="receipt-student-id">Student ID:</label>
                                        <input type="text" class="print-inputs" id="receipt-student-id" placeholder="">
                                    </div>

                                    <div class="payment-student-info-row">
                                        <label for="receipt-date">Date:</label>
                                        <input type="date" class="print-inputs" id="receipt-date">
                                    </div>

                                    <div class="payment-student-info-row">
                                        <label for="receipt-student-name">Student Name:</label>
                                        <input type="text" class="print-inputs" id="receipt-student-name"
                                            placeholder="">
                                    </div>

                                    <div class="payment-student-info-row">
                                        <label for="sy-and-sem">SY & Sem:</label>
                                        <input type="text" class="print-inputs" id="current-sy-and-sem" placeholder="">
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <!-- Grade Table Header -->
                        <tr class="grade-header">
                            <th>Subject</th>
                            <th>1st Sem</th>
                            <th>2nd Sem</th>
                            <th>Final</th>
                            <th>Remarks</th>
                        </tr>

                        <!-- Grade Table Rows (No inner borders) -->
                        <tr class="grade-row">
                            <td>READING AND WRITING</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                        </tr>
                        <tr class="grade-row">
                            <td>PAGBASA AT PAGSUSURI NG IBAT IBANG TEKSTO TUNGO SA P</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                        </tr>
                        <tr class="grade-row">
                            <td>21ST CENTURY LITERATURE FROM THE PHILIPPINES AND THE W</td>
                            <td>78</td>
                            <td>77</td>
                            <td>77.5</td>
                            <td>Passed</td>
                        </tr>
                        <tr class="grade-row">
                            <td>HOUSEKEEPING</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                        </tr>
                        <tr class="grade-row">
                            <td>STATISTICS AND PROBABILITY</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                        </tr>
                        <tr class="grade-row">
                            <td>PHYSICAL EDUCATION AND HEALTH</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                        </tr>
                        <tr class="grade-row">
                            <td>PHYSICAL SCIENCE</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                            <td>0</td>
                        </tr>
                    </table>

                    <div class="printable-footer">
                        Date Printed: <strong>4/1/2020</strong>
                    </div>

                    <!-- Print Button -->
                    <div class="modal-buttons">
                        <button onclick="printReceipt()" class="print-btn">PRINT RECEIPT</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const path = window.location.pathname;
        const wordArray = (path.split("/"));
        const studentName = ((wordArray[wordArray.length-1]));
        findStudent(studentName);
    });

    async function findStudent(studentName){
        const response = await fetch(`/students/find-student/name/${studentName}`);
        if(!response.ok){alert("student record no found");}
        const student =await response.json();

        document.getElementById("stud-type").textContent = student.status;
        document.getElementById("transferee").textContent = (student.transferee === "true" || student.transferee) ? "YES" : "NO";
        document.getElementById("student-id").value = student.studentDisplayId;
        document.getElementById("firstName").value = student.firstName;
        document.getElementById("middleName").value = student.middleName;
        document.getElementById("lastName").value = student.lastName;
        document.getElementById("gender").value = student.gender;
        document.getElementById("birthdate").value = student.birthdate;
        document.getElementById("placeOfBirth").value = student.birthPlace;
        document.getElementById("studfatherName").value = student.fatherName;
        document.getElementById("studfatherOccupation").value = student.fatherOccupation;
        document.getElementById("studmotherName").value = student.motherName;
        document.getElementById("studmotherOccupation").value = student.motherOccupation;
        document.getElementById("street").value = student.address.street;
        document.getElementById("barangay").value = student.address.barangay;
        document.getElementById("city").value = student.address.city;
    }
</script>

</html>